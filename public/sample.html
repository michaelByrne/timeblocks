<head>
  <style>
    body{
      background-color: #00264d;
    }
    .land {
      fill: #00264d;
      stroke: none;
    }

    .state {
      fill: white;
      stroke: #666;
    }
  </style>
</head>
<body>

<script src="https://d3js.org/d3.v3.min.js"></script>
<script src="https://d3js.org/topojson.v1.min.js"></script>
<script>
//  var valueById = [ 0.11875   ,  0.1       ,  0.13      ,  0.125     ,  0.17777778,
//  0.14444444,  0.2       ,  0.2       ,  0.16206897,  0.12666667,
//  0.2       ,  0.1125    ,  0.1675    ,  0.13636364,  0.11666667,
//  0.12      ,  0.125     ,  0.15      ,  0.1625    ,  0.19      ,
//  0.2       ,  0.16875   ,  0.16      ,  0.13333333,  0.14      ,
//  0.13333333,  0.13      ,  0.16666667,  0.2       ,  0.18214286,
//  0.18      ,  0.18103448,  0.12666667,  0.1       ,  0.15      ,
//  0.10714286,  0.19285714,  0.14      ,     0.2       ,  0.1375    ,
//  0.13333333,  0.14545455,  0.14210526,  1.10833333,  0.2       ,
//  0.15769231,  0.17916667,  0.11      ,  0.14      ,  0.1       ];

var valueById = [
  NaN,
  .1187, //al .187
  .03, //ak .00
  NaN,
  .13, //az .300
  .125, //ar .2500
  .18, //ca .777
  NaN,
  .144, //co .444
  .2, //ct 1.0
  .2, //de 1.0
  NaN,
  .161, //fl .620690
  .127, //ga .2667
  NaN,
  .2, //hi 1.0
  .113, //id .125
  .168, //il .6750
  .136, //in .3636
  .117, //ia .1667
  .12, //ks .200
  .125, //ky .25
  .15, //la .5000
  .163, //me .625
  .19, //md .900
  .2, //ma 1.0
  .169, //mi .168
  .16, //mn .600
  .13, //ms .333
  .14, //mo .400
  .133, //mt .333
  .13, //ne .300
  .166, //nv .666
  .2, //nh 1
  .18, //nj .8
  .180, //nm .800
  .181, //ny .810
  .16, //nc .6666
  .03, //nd 00
  .15, //oh .5
  .107, //ok .0714
  .193, //or .9285
  .14, //pa .400
  NaN,
  .2, //rh 1.0
  .138, //sc .375
  .133, //sd .333
  .145, //tn
  .142, //tx .421
  .108, //ut .083
  .2, //vt 1
  .158, //va .5769
  NaN,
  .179, //wa .791
  .101, //wv .1
  .14, //wi .4
  .05  //wy 0
];
console.log(valueById.length);

var path = d3.geo.path();
var counter = 0;

var svg = d3.select("body").append("svg")
        .attr("width", 960)
        .attr("height", 500);

d3.json("us.json", function (error, us) {
  if (error) throw error;
  svg.append("path")
          .datum(topojson.feature(us, us.objects.land))
          .attr("class", "land")
          .attr("d", path);

  svg.selectAll(".state")
          .data(topojson.feature(us, us.objects.states).features)
          .enter().append("path")
          .attr("class", "state")
          .attr("d", path)
          .attr("transform", function (d) {
            var w = valueById[d.id];
            var centroid = path.centroid(d),
                    x = centroid[0],
                    y = centroid[1];
            return "translate(" + x + "," + y + ")"
                    + "scale(" + Math.sqrt(w * (w*25) || 0) + ")"
                    + "translate(" + -x + "," + -y + ")";
          })
          .style("stroke-width", function (d) {
            return 0;
          });
});</script>
</body>